<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	 <link rel="shortcut icon" href="/img/logo_miccall.png">
	
			
    <title>
    JC Zhang
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">JC-Zhang</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">Home</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">categories</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/Algorithm/">Algorithm</a></li><li><a class="category-link" href="/categories/C/">C++</a></li><li><a class="category-link" href="/categories/Essay/">Essay</a></li><li><a class="category-link" href="/categories/Problem/">Problem</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        <li class="active">
	            <a href="#s1">archives</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="archive-link" href="/archives/2099/12/">December 2099</a></li><li><a class="archive-link" href="/archives/2018/01/">January 2018</a></li><li><a class="archive-link" href="/archives/2017/12/">December 2017</a>
	                    </ul>
	        </li>
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="About">
		                About
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="Link">
		                Link
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="Gallery">
		                Gallery
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tags/" title="Tags">
		                Tags
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/qyb1228.github.io" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://img.tuku.cn/file_big/201503/78ee5c646226415e9190122c48285ca2.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >Deep First Search</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h1 id="概论"><a href="#概论" class="headerlink" title="概论"></a>概论</h1><p>搜索与回溯算法，就像是在迷宫里不断寻找正确前进路径的方式。</p>
<p>搜索与回溯也是信息学竞赛中常会有的算法（algorithm）。于是，诸位<strong><em>作为新生代的大佬</em></strong>，哪里能不好好学习一下搜索回溯算法呐？！！！</p>
<h3 id="这里讲的是深度搜索策略（dfs）；"><a href="#这里讲的是深度搜索策略（dfs）；" class="headerlink" title="这里讲的是深度搜索策略（dfs）；"></a>这里讲的是深度搜索策略（dfs）；</h3><a id="more"></a>
<p><img src="http://img.blog.csdn.net/20171109084256985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>dfs就是一条路走到黑，不撞南墙不回头！！！<br>就类似迷宫问题： 进入迷宫后，先随意选择一个前进方向，一步步向前试探前进，如果<strong>碰到死胡同</strong>，说明前进方向已无路可走，这时，首先看其它方向是否还有路可走，如果<strong>有路可走，则沿该方向再向前试探</strong>；如果已无路可走，则<strong>返回一步</strong>，再看其它方向是否还有路可走；如果有路可走，则沿该方向再向前试探。按此原则不断<strong>搜索回溯再搜索</strong>，<strong>直到找到新的出路或从原路返回入口处无解为止。</strong><br><strong>递归回溯法算法框架[一]</strong></p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">Search</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
　<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>算符种数<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
　　<span class="token keyword">if</span> <span class="token punctuation">(</span>满足条件<span class="token punctuation">)</span>
　　   <span class="token punctuation">{</span>
　　　　保存结果
　　　　<span class="token keyword">if</span> <span class="token punctuation">(</span>到目的地<span class="token punctuation">)</span> 输出解<span class="token punctuation">;</span>
　　　           <span class="token keyword">else</span> <span class="token function">Search</span><span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
　　　　恢复：保存结果之前的状态<span class="token punctuation">{</span>回溯一步<span class="token punctuation">}</span>
　 　  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>递归回溯法算法框架[二]</strong></p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">Search</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
　  <span class="token keyword">if</span>  <span class="token punctuation">(</span>到目的地<span class="token punctuation">)</span> 输出解<span class="token punctuation">;</span>
　  <span class="token keyword">else</span>
　　  <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>算符种数<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
　　　 <span class="token keyword">if</span>  <span class="token punctuation">(</span>满足条件<span class="token punctuation">)</span> 
　　　<span class="token punctuation">{</span>
　　　　保存结果<span class="token punctuation">;</span>
　　　    <span class="token function">Search</span><span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
　　　　恢复：保存结果之前的状态<span class="token punctuation">{</span>回溯一步<span class="token punctuation">}</span>
　　　<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>以上是两个框架，就是搜索回溯算法的框架，看不懂吗？没关系，结合着它一起看看题目和代码。 </p>
<p>#例题：</p>
<p>###例题一</p>
<p>设有n个整数的集合｛1,2,…,n｝，从中取出任意r个数进行排列（r&lt;=n），试列出所有的排列。<br>输入：一行，n和r。<br>输出：所有的排列，每种占一行。<br>输入样例：</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token number">3</span> <span class="token number">3</span>
</code></pre>
<p>输出样例：</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token number">1</span> <span class="token number">3</span> <span class="token number">2</span>
<span class="token number">2</span> <span class="token number">1</span> <span class="token number">3</span>
<span class="token number">2</span> <span class="token number">3</span> <span class="token number">1</span>
<span class="token number">3</span> <span class="token number">1</span> <span class="token number">2</span>
<span class="token number">3</span> <span class="token number">2</span> <span class="token number">1</span>
<span class="token number">6</span>
</code></pre>
<p>我们分析一下这个题哈：首先，你要从1开始搜，搜啊搜，搜啊搜，当1的情况全部搜完事时，再从2开始搜········<br>以下是参考程序：</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;cstdio></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iomanip></span></span>
<span class="token comment" spellcheck="true">//库文件名 </span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> num<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token number">10001</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//先定义一下全局变量 ，b数组是bool类型、用于判断，以防止搜重 </span>
<span class="token keyword">bool</span> b<span class="token punctuation">[</span><span class="token number">100001</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//以上是函数声明 </span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cin<span class="token operator">>></span>n<span class="token operator">>></span>r<span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//取到n，r得值 </span>
    <span class="token function">search</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//开始搜索，从"1"开始 </span>
    cout<span class="token operator">&lt;&lt;</span>num<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//n个数，从一到n都搜索一遍，for循环内的是搜索以ni为开头的数 （定义ni是第i个数） </span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span>
          <span class="token comment" spellcheck="true">//自己手动模拟，你就明白了 </span>
          b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token comment" spellcheck="true">//防止搜重 </span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">==</span>r<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token function">search</span><span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment" spellcheck="true">//没到目的地，那就继续搜 </span>
          b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token comment" spellcheck="true">//回溯，很关键，特别关键，超超级关键（重要的词说三遍； </span>

      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//这是一个输出含数 </span>
<span class="token punctuation">{</span>
    num<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//看输出了多少个排列 </span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>r<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
       cout<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
       <span class="token comment" spellcheck="true">//setw（3）是以空三个格形式输出 </span>
    cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>这里是这个程序运行情况<br><img src="http://img.blog.csdn.net/20171111194536156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>注意：搜索与回溯这一方面的算法，是需要大量的<strong><em>模拟</em></strong> 的；<br>模拟模拟模拟，特别重要哦！！！！！</p>
<p>###例题二：<br>任何一个大于1的自然数n，总可以拆分成若干个小于n的自然数之和。<br>输入：n<br>输出：n这个数的拆分方式，并输出总共有多少种拆分方式。<br>输入样例：</p>
<pre><code>7
</code></pre><p>输出样例：</p>
<pre><code>7=1+1+1+1+1+1+1
7=1+1+1+1+1+2
7=1+1+1+1+3
7=1+1+1+2+2
7=1+1+1+4
7=1+1+2+3
7=1+1+5
7=1+2+2+2
7=1+2+4
7=1+3+3
7=1+6
7=2+2+3
7=2+5
7=3+4
total=14
</code></pre><p>以下为参考程序;</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;fstream></span></span>

<span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">10001</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>total<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
ifstream <span class="token function">fin</span> <span class="token punctuation">(</span><span class="token string">"in.in"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ofstream <span class="token function">fout</span> <span class="token punctuation">(</span><span class="token string">"out.out"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//这是一个输出函数 </span>
    fout<span class="token operator">&lt;&lt;</span>n<span class="token operator">&lt;&lt;</span><span class="token string">"="</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>t<span class="token number">-1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> fout<span class="token operator">&lt;&lt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">"+"</span><span class="token punctuation">;</span>
    fout<span class="token operator">&lt;&lt;</span>a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    total<span class="token operator">++</span><span class="token punctuation">;</span>    

<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span><span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>a<span class="token punctuation">[</span>t<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>s<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">{</span>
            a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span>
            s<span class="token operator">-</span><span class="token operator">=</span>i<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//如果到达目的地的话，就输出 </span>
            <span class="token keyword">else</span> <span class="token function">search</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//如果没到目的地的话，就在搜索下一条路。 </span>
        s<span class="token operator">+</span><span class="token operator">=</span>i<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//回溯阶段，很重要很重要很重要 </span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fin<span class="token operator">>></span>n<span class="token punctuation">;</span>
    <span class="token function">search</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//搜索 </span>
    fout<span class="token operator">&lt;&lt;</span>total<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>这里是程序运行结果，用文件流方式写的<br><img src="http://img.blog.csdn.net/20171111194209231?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong><em>这两个的例题是很经典的，一定要自已模拟一下，手动模拟！！！！</em></strong></p>
<h3 id="八皇后问题："><a href="#八皇后问题：" class="headerlink" title="八皇后问题："></a>八皇后问题：</h3><hr>
<p><img src="http://img.blog.csdn.net/20171112174701484?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>要在国际象棋棋盘中放八个皇后，使任意两个皇后都不能互相吃。（提示：皇后能吃同一行、同一列、同一对角线的任意棋子。）</p>
<pre class=" language-cpp"><code class="language-cpp">放置第ｉ个<span class="token punctuation">(</span>行<span class="token punctuation">)</span>皇后的算法为：
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>；
　<span class="token punctuation">{</span>
　　   <span class="token keyword">int</span> j<span class="token punctuation">;</span>
　　　<span class="token keyword">for</span> <span class="token punctuation">(</span>第i个皇后的位置j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span><span class="token number">8</span><span class="token punctuation">;</span>j<span class="token operator">++</span> <span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//在本行的8列中去试</span>
　　　<span class="token keyword">if</span> <span class="token punctuation">(</span>本行本列允许放置皇后<span class="token punctuation">)</span>
　　　　<span class="token punctuation">{</span>
　　　　　放置第i个皇后；
                  对放置皇后的位置进行标记；
　　　　　<span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">8</span><span class="token punctuation">)</span> 输出                                  <span class="token comment" spellcheck="true">//已经放完个皇后</span>
　　　　　　  <span class="token keyword">else</span> <span class="token function">search</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>；                <span class="token comment" spellcheck="true">//放置第i+1个皇后</span>
　　　　　对放置皇后的位置释放标记，尝试下一个位置是否可行；
　　　　<span class="token punctuation">}</span>
　<span class="token punctuation">}</span>
</code></pre>
<p>显然问题的关键在于如何判定某个皇后所在的行、列、斜线上是否有别的皇后；可以从矩阵的特点上找到规律，如<strong>果在同一行，则行号相同；如果在同一列上，则列号相同；如果同在／ 斜线上的行列值之和相同；如果同在＼ 斜线上的行列值之差相同</strong>；从下图可验证：<br><img src="http://img.blog.csdn.net/20171112174724842?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这*里写图片描述"><br>考虑每行有且仅有一个皇后，设一维数组Ａ[1..8]表示皇后的放置：第ｉ行皇后放在第ｊ列，<strong>用Ａ[i]＝j来表示，即下标是行数，</strong>内容是列数。例如：A[3]=5就表示第3个皇后在第3行第5列上。判断皇后是否安全，即检查同一列、同一对角线是否已有皇后，建立标志数组ｂ[1..8]控制同一列只能有一个皇后，若两皇后在同一对角线上，则其行列坐标之和或行列坐标之差相等，故亦可建立标志数组ｃ[1..16]、ｄ[-7..7]控制同一对角线上只能有一个皇后。<br> 如果斜线不分方向，则同一斜线上<strong><em>两皇后的行号之差的绝对值与列号之差的绝对值相同。在这种方式下，要表示两个皇后I和J不在同一列或斜线上的条件可以描述为：A[I]&lt;&gt;A[J] AND ABS(I-J)&lt;&gt;ABS(A[I]-A[J]){I和J分别表示两个皇后的行号}</em></strong><br>下面放代码：</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;cstdio></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;cstdlib></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iomanip></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">bool</span> d<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>c<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">search</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                                          <span class="token comment" spellcheck="true">//从第1个皇后开始放置</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> j<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span><span class="token number">8</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>                                              <span class="token comment" spellcheck="true">//每个皇后都有8位置(列)可以试放　</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span>c<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">!</span>d<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                   <span class="token comment" spellcheck="true">//寻找放置皇后的位置</span>
      <span class="token comment" spellcheck="true">//由于C++不能操作负数组，因此考虑加7</span>
      <span class="token punctuation">{</span>                                                                  <span class="token comment" spellcheck="true">//放置皇后,建立相应标志值</span>
      a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>j<span class="token punctuation">;</span>                                                          <span class="token comment" spellcheck="true">//摆放皇后</span>
      b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>                                                         <span class="token comment" spellcheck="true">//宣布占领第j列</span>
      c<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>                                                      <span class="token comment" spellcheck="true">//占领两个对角线</span>
      d<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                           <span class="token comment" spellcheck="true">//８个皇后都放置好,输出</span>
        <span class="token keyword">else</span> <span class="token function">search</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                      <span class="token comment" spellcheck="true">//继续递归放置下一个皇后</span>
      b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>                                                        <span class="token comment" spellcheck="true">//递归返回即为回溯一步,当前皇后退出</span>
      c<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
      d<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    sum<span class="token operator">++</span><span class="token punctuation">;</span>                                                        <span class="token comment" spellcheck="true">//方案数累加1</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"sum="</span><span class="token operator">&lt;&lt;</span>sum<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>                                         <span class="token comment" spellcheck="true">//输出一种方案</span>
      cout<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre>
<p><img src="http://img.blog.csdn.net/20171112175007386?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175013484?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175022742?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175031826?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175042407?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2017/12/09/Deep-First-Search/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2017/12/09/Deep-First-Search/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2018总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
