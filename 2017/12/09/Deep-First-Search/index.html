<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	 <link rel="shortcut icon" href="/img/logo_miccall.png">
	
			
    <title>
    JC Zhang
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">JC-Zhang</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">Home</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">categories</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/Algorithm/">Algorithm</a></li><li><a class="category-link" href="/categories/C/">C++</a></li><li><a class="category-link" href="/categories/Essay/">Essay</a></li><li><a class="category-link" href="/categories/Problem/">Problem</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        <li class="active">
	            <a href="#s1">archives</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="archive-link" href="/archives/9999/12/">December 9999</a></li><li><a class="archive-link" href="/archives/2017/12/">December 2017</a>
	                    </ul>
	        </li>
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="About">
		                About
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="Link">
		                Link
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="Gallery">
		                Gallery
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tags/" title="Tags">
		                Tags
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/qyb1228.github.io" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://img.tuku.cn/file_big/201503/78ee5c646226415e9190122c48285ca2.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >Deep First Search</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h1 id="概论"><a href="#概论" class="headerlink" title="概论"></a>概论</h1><p>搜索与回溯算法，就像是在迷宫里不断寻找正确前进路径的方式。</p>
<p>搜索与回溯也是信息学竞赛中常会有的算法（algorithm）。于是，诸位<strong><em>作为新生代的大佬</em></strong>，哪里能不好好学习一下搜索回溯算法呐？！！！</p>
<h3 id="这里讲的是深度搜索策略（dfs）；"><a href="#这里讲的是深度搜索策略（dfs）；" class="headerlink" title="这里讲的是深度搜索策略（dfs）；"></a>这里讲的是深度搜索策略（dfs）；</h3><a id="more"></a>
<p><img src="http://img.blog.csdn.net/20171109084256985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>dfs就是一条路走到黑，不撞南墙不回头！！！<br>就类似迷宫问题： 进入迷宫后，先随意选择一个前进方向，一步步向前试探前进，如果<strong>碰到死胡同</strong>，说明前进方向已无路可走，这时，首先看其它方向是否还有路可走，如果<strong>有路可走，则沿该方向再向前试探</strong>；如果已无路可走，则<strong>返回一步</strong>，再看其它方向是否还有路可走；如果有路可走，则沿该方向再向前试探。按此原则不断<strong>搜索回溯再搜索</strong>，<strong>直到找到新的出路或从原路返回入口处无解为止。</strong><br><strong>递归回溯法算法框架[一]</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Search</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">　<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=算符种数;i++)</span><br><span class="line">　　<span class="keyword">if</span> (满足条件)</span><br><span class="line">　　   &#123;</span><br><span class="line">　　　　保存结果</span><br><span class="line">　　　　<span class="keyword">if</span> (到目的地) 输出解;</span><br><span class="line">　　　           <span class="keyword">else</span> Search(k+<span class="number">1</span>);</span><br><span class="line">　　　　恢复：保存结果之前的状态&#123;回溯一步&#125;</span><br><span class="line">　 　  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>递归回溯法算法框架[二]</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Search</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">　  <span class="keyword">if</span>  (到目的地) 输出解;</span><br><span class="line">　  <span class="keyword">else</span></span><br><span class="line">　　  <span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=算符种数;i++)</span><br><span class="line">　　　 <span class="keyword">if</span>  (满足条件) </span><br><span class="line">　　　&#123;</span><br><span class="line">　　　　保存结果;</span><br><span class="line">　　　    Search(k+<span class="number">1</span>);</span><br><span class="line">　　　　恢复：保存结果之前的状态&#123;回溯一步&#125;</span><br><span class="line">　　　&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上是两个框架，就是搜索回溯算法的框架，看不懂吗？没关系，结合着它一起看看题目和代码。 </p>
<p>#例题：</p>
<p>###例题一</p>
<p>设有n个整数的集合｛1,2,…,n｝，从中取出任意r个数进行排列（r&lt;=n），试列出所有的排列。<br>输入：一行，n和r。<br>输出：所有的排列，每种占一行。<br>输入样例：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> <span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<p>输出样例：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure></p>
<p>我们分析一下这个题哈：首先，你要从1开始搜，搜啊搜，搜啊搜，当1的情况全部搜完事时，再从2开始搜········<br>以下是参考程序：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="comment">//库文件名 </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> num=<span class="number">0</span>,a[<span class="number">10001</span>]=&#123;<span class="number">0</span>&#125;,n,r;</span><br><span class="line"><span class="comment">//先定义一下全局变量 ，b数组是bool类型、用于判断，以防止搜重 </span></span><br><span class="line"><span class="keyword">bool</span> b[<span class="number">100001</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//以上是函数声明 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;r;</span><br><span class="line">	<span class="comment">//取到n，r得值 </span></span><br><span class="line">	search(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//开始搜索，从"1"开始 </span></span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;num&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//n个数，从一到n都搜索一遍，for循环内的是搜索以ni为开头的数 （定义ni是第i个数） </span></span><br><span class="line">	  <span class="keyword">if</span>(!b[i])&#123;</span><br><span class="line">	  	a[k]=i;</span><br><span class="line">	  	<span class="comment">//自己手动模拟，你就明白了 </span></span><br><span class="line">	  	b[i]=<span class="number">1</span>;</span><br><span class="line">	  	<span class="comment">//防止搜重 </span></span><br><span class="line">	  	<span class="keyword">if</span>(k==r) print();</span><br><span class="line">	  	  <span class="keyword">else</span> search(k+<span class="number">1</span>);</span><br><span class="line">	  	 <span class="comment">//没到目的地，那就继续搜 </span></span><br><span class="line">	  	b[i]=<span class="number">0</span>;</span><br><span class="line">	  	<span class="comment">//回溯，很关键，特别关键，超超级关键（重要的词说三遍； </span></span><br><span class="line">	  	  </span><br><span class="line">	  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">//这是一个输出含数 </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	num++;</span><br><span class="line">	<span class="comment">//看输出了多少个排列 </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;i++)</span><br><span class="line">	   <span class="built_in">cout</span>&lt;&lt;setw(<span class="number">3</span>)&lt;&lt;a[i];</span><br><span class="line">	   <span class="comment">//setw（3）是以空三个格形式输出 </span></span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里是这个程序运行情况<br><img src="http://img.blog.csdn.net/20171111194536156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>注意：搜索与回溯这一方面的算法，是需要大量的<strong><em>模拟</em></strong> 的；<br>模拟模拟模拟，特别重要哦！！！！！</p>
<p>###例题二：<br>任何一个大于1的自然数n，总可以拆分成若干个小于n的自然数之和。<br>输入：n<br>输出：n这个数的拆分方式，并输出总共有多少种拆分方式。<br>输入样例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure></p>
<p>输出样例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">7=1+1+1+1+1+1+1</span><br><span class="line">7=1+1+1+1+1+2</span><br><span class="line">7=1+1+1+1+3</span><br><span class="line">7=1+1+1+2+2</span><br><span class="line">7=1+1+1+4</span><br><span class="line">7=1+1+2+3</span><br><span class="line">7=1+1+5</span><br><span class="line">7=1+2+2+2</span><br><span class="line">7=1+2+4</span><br><span class="line">7=1+3+3</span><br><span class="line">7=1+6</span><br><span class="line">7=2+2+3</span><br><span class="line">7=2+5</span><br><span class="line">7=3+4</span><br><span class="line">total=14</span><br></pre></td></tr></table></figure></p>
<p>以下为参考程序;<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">10001</span>]=&#123;<span class="number">1</span>&#125;,n,total;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function">ifstream <span class="title">fin</span> <span class="params">(<span class="string">"in.in"</span>)</span></span>;</span><br><span class="line"><span class="function">ofstream <span class="title">fout</span> <span class="params">(<span class="string">"out.out"</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">	<span class="comment">//这是一个输出函数 </span></span><br><span class="line">	fout&lt;&lt;n&lt;&lt;<span class="string">"="</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t<span class="number">-1</span>;i++) fout&lt;&lt;a[i]&lt;&lt;<span class="string">"+"</span>;</span><br><span class="line">	fout&lt;&lt;a[t]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	total++;	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=a[t<span class="number">-1</span>];i&lt;=s;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(i&lt;n)&#123;</span><br><span class="line">			a[t]=i;</span><br><span class="line">			s-=i;</span><br><span class="line">			<span class="keyword">if</span>(s==<span class="number">0</span>) print(t);</span><br><span class="line">			<span class="comment">//如果到达目的地的话，就输出 </span></span><br><span class="line">			<span class="keyword">else</span> search(s,t+<span class="number">1</span>);</span><br><span class="line">			<span class="comment">//如果没到目的地的话，就在搜索下一条路。 </span></span><br><span class="line">		s+=i;</span><br><span class="line">		<span class="comment">//回溯阶段，很重要很重要很重要 </span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fin&gt;&gt;n;</span><br><span class="line">	search(n,<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//搜索 </span></span><br><span class="line">	fout&lt;&lt;total;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里是程序运行结果，用文件流方式写的<br><img src="http://img.blog.csdn.net/20171111194209231?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong><em>这两个的例题是很经典的，一定要自已模拟一下，手动模拟！！！！</em></strong></p>
<h3 id="八皇后问题："><a href="#八皇后问题：" class="headerlink" title="八皇后问题："></a>八皇后问题：</h3><hr>
<p><img src="http://img.blog.csdn.net/20171112174701484?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>要在国际象棋棋盘中放八个皇后，使任意两个皇后都不能互相吃。（提示：皇后能吃同一行、同一列、同一对角线的任意棋子。）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">放置第ｉ个(行)皇后的算法为：</span><br><span class="line">int search(i)；</span><br><span class="line">　&#123;</span><br><span class="line">　　   <span class="keyword">int</span> j;</span><br><span class="line">　　　<span class="keyword">for</span> (第i个皇后的位置j=<span class="number">1</span>;j&lt;=<span class="number">8</span>;j++ )	    <span class="comment">//在本行的8列中去试</span></span><br><span class="line">　　　<span class="keyword">if</span> (本行本列允许放置皇后)</span><br><span class="line">　　　　&#123;</span><br><span class="line">　　　　　放置第i个皇后；</span><br><span class="line">                  对放置皇后的位置进行标记；</span><br><span class="line">　　　　　<span class="keyword">if</span> (i==<span class="number">8</span>) 输出	                              <span class="comment">//已经放完个皇后</span></span><br><span class="line">　　　　　　  <span class="keyword">else</span> search(i+<span class="number">1</span>)；                <span class="comment">//放置第i+1个皇后</span></span><br><span class="line">　　　　　对放置皇后的位置释放标记，尝试下一个位置是否可行；</span><br><span class="line">　　　　&#125;</span><br><span class="line">　&#125;</span><br></pre></td></tr></table></figure>
<p>显然问题的关键在于如何判定某个皇后所在的行、列、斜线上是否有别的皇后；可以从矩阵的特点上找到规律，如<strong>果在同一行，则行号相同；如果在同一列上，则列号相同；如果同在／ 斜线上的行列值之和相同；如果同在＼ 斜线上的行列值之差相同</strong>；从下图可验证：<br><img src="http://img.blog.csdn.net/20171112174724842?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这*里写图片描述"><br>考虑每行有且仅有一个皇后，设一维数组Ａ[1..8]表示皇后的放置：第ｉ行皇后放在第ｊ列，<strong>用Ａ[i]＝j来表示，即下标是行数，</strong>内容是列数。例如：A[3]=5就表示第3个皇后在第3行第5列上。判断皇后是否安全，即检查同一列、同一对角线是否已有皇后，建立标志数组ｂ[1..8]控制同一列只能有一个皇后，若两皇后在同一对角线上，则其行列坐标之和或行列坐标之差相等，故亦可建立标志数组ｃ[1..16]、ｄ[-7..7]控制同一对角线上只能有一个皇后。<br> 如果斜线不分方向，则同一斜线上<strong><em>两皇后的行号之差的绝对值与列号之差的绝对值相同。在这种方式下，要表示两个皇后I和J不在同一列或斜线上的条件可以描述为：A[I]&lt;&gt;A[J] AND ABS(I-J)&lt;&gt;ABS(A[I]-A[J]){I和J分别表示两个皇后的行号}</em></strong><br>下面放代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> d[<span class="number">100</span>]=&#123;<span class="number">0</span>&#125;,b[<span class="number">100</span>]=&#123;<span class="number">0</span>&#125;,c[<span class="number">100</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>,a[<span class="number">100</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   search(<span class="number">1</span>);                                                          <span class="comment">//从第1个皇后开始放置</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> j;</span><br><span class="line">  <span class="keyword">for</span> (j=<span class="number">1</span>;j&lt;=<span class="number">8</span>;j++)                                              <span class="comment">//每个皇后都有8位置(列)可以试放　</span></span><br><span class="line">    <span class="keyword">if</span> ((!b[j])&amp;&amp;(!c[i+j])&amp;&amp;(!d[i-j+<span class="number">7</span>]))                   <span class="comment">//寻找放置皇后的位置</span></span><br><span class="line">      <span class="comment">//由于C++不能操作负数组，因此考虑加7</span></span><br><span class="line">      &#123;                                                                  <span class="comment">//放置皇后,建立相应标志值</span></span><br><span class="line">      a[i]=j;                                                          <span class="comment">//摆放皇后</span></span><br><span class="line">      b[j]=<span class="number">1</span>;                                                         <span class="comment">//宣布占领第j列</span></span><br><span class="line">      c[i+j]=<span class="number">1</span>;                                                      <span class="comment">//占领两个对角线</span></span><br><span class="line">      d[i-j+<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (i==<span class="number">8</span>) print();                                           <span class="comment">//８个皇后都放置好,输出</span></span><br><span class="line">        <span class="keyword">else</span> search(i+<span class="number">1</span>);                                      <span class="comment">//继续递归放置下一个皇后</span></span><br><span class="line">      b[j]=<span class="number">0</span>;                                                        <span class="comment">//递归返回即为回溯一步,当前皇后退出</span></span><br><span class="line">      c[i+j]=<span class="number">0</span>;</span><br><span class="line">      d[i-j+<span class="number">7</span>]=<span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    sum++;                                                        <span class="comment">//方案数累加1</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"sum="</span>&lt;&lt;sum&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=<span class="number">8</span>;i++)                                         <span class="comment">//输出一种方案</span></span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;setw(<span class="number">4</span>)&lt;&lt;a[i];</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20171112175007386?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175013484?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175022742?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175031826?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171112175042407?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXliMTIyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2017/12/09/Deep-First-Search/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2017/12/09/Deep-First-Search/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2017总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
